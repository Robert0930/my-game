<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•¸ä½éˆé­‚æ¸¬é©— - é§­å®¢ç‰ˆ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Noto+Sans+TC:wght@400;700&display=swap');

        /* å®šç¾©è®Šæ•¸ - æš—é»‘æ¨¡å¼ (é è¨­) */
        :root {
            --bg-color: #000000;
            --panel-bg: rgba(0, 0, 0, 0.9);
            --text-color: #e0e0e0;
            --primary-color: #00ff41; /* é§­å®¢ç¶  */
            --secondary-color: #b026ff; /* è³½åšç´« */
            --danger-color: #ff003c; /* è­¦å‘Šç´… */
            --border-color: #00ff41;
            --shadow-color: rgba(0, 255, 65, 0.3);
            --btn-hover-text: #000;
        }

        /* æ˜äº®æ¨¡å¼è®Šæ•¸ */
        body.light-mode {
            --bg-color: #f0f2f5;
            --panel-bg: rgba(255, 255, 255, 0.95);
            --text-color: #333333;
            --primary-color: #008f24;
            --secondary-color: #7a00cc;
            --danger-color: #d6002a;
            --border-color: #008f24;
            --shadow-color: rgba(0, 143, 36, 0.2);
            --btn-hover-text: #fff;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Share Tech Mono', 'Noto Sans TC', monospace;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            overflow-x: hidden;
            position: relative;
            padding: 20px 0;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Matrix Canvas èƒŒæ™¯ */
        #matrix-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.8;
        }

        /* CRT æƒæç·šç‰¹æ•ˆ */
        body:not(.light-mode)::before {
            content: " ";
            display: block;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 1;
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
        }

        /* é§­å®¢é©šåš‡å±¤ */
        #hacker-scare {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('hacker.png');
            background-position: center;
            background-size: cover;
            background-repeat: no-repeat;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            display: none;
            mix-blend-mode: normal;
        }

        .scare-active {
            display: block !important;
            animation: glitch-anim 1s steps(5) both;
        }

        @keyframes glitch-anim {
            0% { opacity: 0; transform: translate(0) scale(1); filter: hue-rotate(0deg); }
            10% { opacity: 1; transform: translate(-10px, 10px) scale(1.1); filter: invert(1); }
            20% { opacity: 1; transform: translate(10px, -10px); filter: contrast(2); }
            30% { opacity: 0.8; transform: translate(-15px, 5px); }
            40% { opacity: 1; transform: translate(15px, -5px) scale(1.2); filter: hue-rotate(90deg); }
            50% { opacity: 1; transform: translate(-5px, 15px); }
            60% { opacity: 0.6; transform: translate(5px, -15px); filter: invert(1); }
            70% { opacity: 1; transform: translate(-20px, 0); }
            80% { opacity: 1; transform: translate(10px, 10px) scale(1.1); }
            90% { opacity: 0.8; transform: translate(0, 0); }
            100% { opacity: 0; transform: translate(0); }
        }

        /* ç´…è‰²é–ƒçˆ */
        #red-flash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 0, 0, 0.4);
            z-index: 9998;
            opacity: 0;
            pointer-events: none;
        }
        .flash-active {
            animation: flash-anim 1s ease-out;
        }
        @keyframes flash-anim {
            0% { opacity: 0.8; }
            20% { opacity: 0.3; }
            40% { opacity: 0.8; }
            60% { opacity: 0.2; }
            80% { opacity: 0.6; }
            100% { opacity: 0; }
        }

        /* ä¸»é¡Œåˆ‡æ›æŒ‰éˆ• */
        #theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: var(--panel-bg);
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            padding: 10px 15px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s;
            box-shadow: 0 0 10px var(--shadow-color);
        }
        
        #theme-toggle:hover {
            transform: scale(1.1);
            background: var(--primary-color);
            color: var(--btn-hover-text);
        }

        .container {
            width: 95%;
            max-width: 700px;
            background: var(--panel-bg);
            border: 1px solid var(--border-color);
            box-shadow: 0 0 15px var(--shadow-color);
            padding: 30px;
            position: relative;
            z-index: 10;
            text-align: center;
            border-radius: 8px;
            margin-top: 5vh;
            margin-bottom: 5vh;
            transition: background 0.3s, border 0.3s;
            backdrop-filter: blur(5px);
        }

        h1, h2, h3 {
            text-transform: uppercase;
            margin-bottom: 20px;
        }

        h1 {
            color: var(--primary-color);
            text-shadow: 0 0 8px var(--shadow-color);
            font-size: 2rem;
            line-height: 1.4;
        }

        h2 { font-size: 1.5rem; color: var(--text-color); }
        
        p {
            font-size: 1.1rem;
            margin-bottom: 30px;
            line-height: 1.8;
            color: var(--text-color);
        }

        .btn {
            background: rgba(0,0,0,0.5);
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            padding: 15px 30px;
            font-size: 1.2rem;
            cursor: pointer;
            font-family: inherit;
            transition: all 0.3s ease;
            margin: 10px;
            text-shadow: 0 0 2px var(--shadow-color);
            width: 100%;
            max-width: 250px;
            border-radius: 4px;
        }

        .btn:hover {
            background: var(--primary-color);
            color: var(--btn-hover-text);
            box-shadow: 0 0 20px var(--shadow-color);
        }
        
        /* éš±ç§æ¬Šéƒ¨åˆ†æ¨£å¼ - ä½èª¿ç‰ˆ */
        .privacy-box {
            border: none;
            background: transparent;
            padding: 10px;
            margin-bottom: 30px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.9;
        }
        
        .sim-link {
            color: var(--secondary-color);
            text-decoration: underline;
            cursor: pointer;
            font-weight: bold;
        }
        
        .sim-link:hover {
            color: #fff;
            text-shadow: 0 0 5px var(--secondary-color);
        }

        /* å…è²¬è²æ˜å°å­— */
        .disclaimer-text {
            margin-top: 25px;
            font-size: 0.75rem;
            color: #777;
            line-height: 1.5;
            max-width: 90%;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* éš±ç§æ¬Š Modal */
        #privacy-modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: #111;
            border: 2px solid var(--secondary-color);
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 30px;
            text-align: left;
            box-shadow: 0 0 30px rgba(176, 38, 255, 0.3);
            position: relative;
        }
        
        .modal-text {
            font-size: 0.9rem;
            line-height: 1.6;
            color: #ccc;
            margin-bottom: 20px;
        }
        
        .modal-small {
            font-size: 0.7rem;
            color: #666;
            margin-bottom: 10px;
            font-style: italic;
        }

        .btn-secondary {
            color: var(--secondary-color);
            border-color: var(--secondary-color);
        }

        .btn-secondary:hover {
            background: var(--secondary-color);
            color: #fff;
            box-shadow: 0 0 20px rgba(176, 38, 255, 0.4);
        }

        .screen {
            display: none;
            width: 100%;
            animation: fadeIn 0.8s ease-in-out;
        }

        .active {
            display: block;
        }

        .progress-container {
            width: 100%;
            background-color: #444;
            height: 6px;
            margin-bottom: 30px;
            border-radius: 3px;
            overflow: hidden;
        }
        
        body.light-mode .progress-container {
            background-color: #ddd;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        .result-score {
            font-size: 5rem;
            font-weight: bold;
            color: var(--primary-color);
            text-shadow: 0 0 20px var(--shadow-color);
            margin: 20px 0;
        }

        .result-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .result-desc {
            font-size: 1.2rem;
            margin-bottom: 40px;
            border-bottom: 1px dashed var(--text-color);
            padding-bottom: 30px;
        }

        .explanation-container, .tools-container {
            text-align: left;
            margin-top: 30px;
        }

        .section-header {
            text-align: center;
            color: var(--secondary-color);
            border: 1px solid var(--secondary-color);
            padding: 10px 20px;
            margin: 0 auto 30px auto;
            display: table;
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(176, 38, 255, 0.2);
            background: rgba(0,0,0,0.5);
        }

        .exp-item {
            background: rgba(128, 128, 128, 0.1);
            border-left: 5px solid var(--primary-color);
            margin-bottom: 25px;
            padding: 20px;
            border-radius: 0 5px 5px 0;
            transition: transform 0.2s;
        }

        .exp-item.wrong-item {
            border-left-color: var(--danger-color);
            background: rgba(255, 0, 60, 0.1);
        }

        .exp-item:hover {
            transform: translateX(5px);
        }

        .exp-q {
            color: var(--primary-color);
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 10px;
            display: block;
        }

        .exp-item.wrong-item .exp-q {
            color: var(--danger-color);
        }
        
        .wrong-tag {
            font-size: 0.8rem;
            background: var(--danger-color);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 10px;
            vertical-align: middle;
            display: none;
        }
        
        .exp-item.wrong-item .wrong-tag {
            display: inline-block;
        }

        .exp-text {
            font-size: 0.95rem;
            color: var(--text-color);
            line-height: 1.6;
        }

        .exp-img {
            max-width: 100%;
            border: 2px solid var(--text-color);
            margin-top: 15px;
            opacity: 0.9;
        }

        .tool-item {
            border: 1px solid var(--text-color);
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 5px;
            background: rgba(0,0,0,0.3);
        }
        
        body.light-mode .tool-item {
            background: rgba(255,255,255,0.5);
            border-color: #ccc;
        }

        .tool-link {
            color: var(--primary-color);
            font-size: 1.2rem;
            font-weight: bold;
            text-decoration: none;
            display: block;
            margin-bottom: 10px;
            word-break: break-all;
        }

        .tool-link:hover {
            text-decoration: underline;
        }

        .scroll-hint {
            margin-top: -20px;
            margin-bottom: 30px;
            font-size: 0.9rem;
            color: var(--secondary-color);
            animation: bounce 2s infinite;
        }

        /* Q4 è£ç½®æƒææ¨¡æ“¬ç‰¹æ•ˆ */
        #scan-dots { display: inline-block; width: 30px; text-align: left; }
        
        .scan-progress-wrapper {
            width: 100%;
            max-width: 400px;
            height: 10px;
            background: #333;
            border-radius: 5px;
            margin: 30px auto;
            overflow: hidden;
            border: 1px solid #555;
        }
        
        .scan-progress-bar {
            height: 100%;
            background: var(--primary-color);
            width: 0%;
            box-shadow: 0 0 10px var(--primary-color);
            transition: width 0.1s linear; /* è®“JSæ§åˆ¶å¿½å¿«å¿½æ…¢æ™‚é †æš¢ */
        }
        
        /* ä»¿çœŸæ¬Šé™è¦–çª— */
        .fake-permission-modal {
            background: #fff;
            color: #333;
            width: 300px;
            border-radius: 12px;
            padding: 0;
            margin: 20px auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-align: left;
            position: relative;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; /* ä»¿ç³»çµ±å­—é«” */
            display: none; /* é è¨­éš±è— */
            animation: popIn 0.3s ease-out;
        }
        
        .light-mode .fake-permission-modal {
            border: 1px solid #ccc;
        }

        .perm-header {
            padding: 20px 20px 10px 20px;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .perm-body {
            padding: 0 20px 20px 20px;
            font-size: 0.9rem;
            color: #666;
            border-bottom: 1px solid #eee;
        }

        .perm-actions {
            display: flex;
        }

        .perm-btn {
            flex: 1;
            background: transparent;
            border: none;
            padding: 15px 0;
            font-size: 1rem;
            font-weight: bold;
            color: #007aff; /* iOS Blue */
            cursor: pointer;
            transition: background 0.2s;
        }

        .perm-btn:first-child {
            border-right: 1px solid #eee;
            color: #007aff; 
        }
        
        .perm-btn:hover {
            background: #f5f5f5;
            box-shadow: none; /* è¦†è“‹å…¨åŸŸ btn hover */
            color: #005ecb;
        }
        
        /* è®“å‡è¦–çª—å…§çš„æŒ‰éˆ•ä¸è¦åƒåˆ°å¤–é¢çš„ .btn æ¨£å¼ */
        
        .virus-alert-text {
            color: var(--danger-color);
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            animation: flashRed 1s infinite;
            display: none; /* æƒæå®Œæ‰é¡¯ç¤º */
        }

        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes flashRed {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }

        /* RWD */
        @media (max-width: 600px) {
            .container { margin-top: 2vh; padding: 20px; }
            h1 { font-size: 1.5rem; }
            .result-score { font-size: 3.5rem; }
            #theme-toggle { top: 10px; right: 10px; padding: 8px 12px; }
        }
    </style>
</head>
<body>

    <!-- èƒŒæ™¯ç‰¹æ•ˆ Canvas -->
    <canvas id="matrix-canvas"></canvas>

    <!-- é§­å®¢é©šåš‡å±¤ -->
    <div id="hacker-scare"></div>
    <div id="red-flash"></div>

    <!-- éš±ç§æ¬Šæ¢æ¬¾ Modal -->
    <div id="privacy-modal">
        <div class="modal-content">
            <h2 style="color:var(--primary-color); text-align:center;">éš±ç§æ¬Šè²æ˜</h2>
            <div class="modal-small text-center">%æœ¬ç«™å…§å®¹åƒ…ä¾›æ•™è‚²èˆ‡å¨›æ¨‚ï¼Œä¸æœƒå¯¦éš›è’é›†æ‚¨çš„ä»»ä½•å€‹äººè³‡æ–™ã€‚%</div>
            <div class="modal-text">
                æˆ‘å€‘éå¸¸é‡è¦–æ‚¨çš„éš±ç§ã€‚æ•¸ä½éˆé­‚æ¸¬é©—ï¼ˆä»¥ä¸‹ç°¡ç¨±ã€Œæˆ‘å€‘ã€ï¼‰è‡´åŠ›æ–¼ä¿è­·æ‚¨çš„å€‹äººè³‡æ–™ã€‚æœ¬æ”¿ç­–æ—¨åœ¨æ¸…æ¥šèªªæ˜æˆ‘å€‘å¦‚ä½•è’é›†ã€ä½¿ç”¨åŠä¿è­·æ‚¨çš„è³‡è¨Šã€‚<br><br>
                1. æˆ‘å€‘æœƒè¨˜éŒ„æ‚¨èˆ‡æœ¬æœå‹™äº’å‹•çš„è¡Œç‚ºï¼ŒåŒ…æ‹¬æ‚¨ç€è¦½çš„é é¢ã€é»æ“Šçš„é€£çµã€å­˜å–æ™‚é–“ã€åœç•™æ™‚é–“åŠæ‚¨åœ¨é€ è¨ªæœ¬æœå‹™å‰ç€è¦½çš„ç¶²ç«™ã€‚<br><br>
                2. ç”¨æˆ¶åŒæ„æœ¬å…¬å¸æœ‰æ¬Šé€éè‡ªå‹•åŒ–æ‰‹æ®µï¼ˆåŒ…æ‹¬ä½†ä¸é™æ–¼ Cookiesã€ä¿¡æ¨™ã€è…³æœ¬åŠæœªä¾†é–‹ç™¼ä¹‹ä»»ä½•è¿½è¹¤æŠ€è¡“ï¼‰æ”¶é›†ç”¨æˆ¶çš„è¨­å‚™æŒ‡ç´‹ã€ç€è¦½æ­·å²ã€ä½ç½®æ•¸æ“šï¼ˆç²¾ç¢ºèˆ‡æ¨¡ç³Šï¼‰ã€ç”Ÿç‰©ç‰¹å¾µç‰¹å¾µåŠç”±æ­¤æ¨æ–·å‡ºçš„è¡Œç‚ºæ¨¡å¼èˆ‡å¿ƒç†ç•«åƒã€‚ç”¨æˆ¶æ‰¿èªï¼Œæ­¤é¡æ•¸æ“šæ”¶é›†å¯èƒ½åœ¨æ‡‰ç”¨ç¨‹å¼æœªé‹è¡Œæˆ–è¨­å‚™è™•æ–¼ä¼‘çœ ç‹€æ…‹æ™‚ç™¼ç”Ÿã€‚<br><br>
                3. ç”¨æˆ¶æˆäºˆæœ¬å…¬å¸ä¸€é …å…¨çƒæ€§ã€æ°¸ä¹…ä¸”å¯å®Œå…¨è½‰è®“çš„è¨±å¯ï¼Œå…è¨±æœ¬å…¬å¸å°‡ä¸Šè¿°æ•¸æ“šå‡ºå”®ã€æˆæ¬Šã€ç§Ÿè³ƒæˆ–æŠ«éœ²äºˆæœ¬å…¬å¸çš„ã€Œç­–ç•¥åˆä½œå¤¥ä¼´ã€ã€‚ã€Œç­–ç•¥åˆä½œå¤¥ä¼´ã€å®šç¾©åŒ…æ‹¬ä½†ä¸é™æ–¼å»£å‘Šå•†ã€æ•¸æ“šç¶“ç´€å•†ã€ä¿éšªå…¬å¸åŠä»»ä½•æœ¬å…¬å¸å–®æ–¹é¢èªå®šæœ‰å•†æ¥­é—œè¯ä¹‹å¯¦é«”ã€‚
            </div>
            <button class="btn btn-secondary" onclick="startGame(true)" style="width:100%; margin:0;">ä¸åŒæ„å…¨éƒ¨ä¸¦ç¹¼çºŒ</button>
            <div style="text-align:center; margin-top:10px; font-size:0.8rem; cursor:pointer; text-decoration:underline;" onclick="closePolicy()">[ è¿”å› ]</div>
        </div>
    </div>

    <!-- æ—¥å¤œæ¨¡å¼åˆ‡æ›æŒ‰éˆ• -->
    <button id="theme-toggle" onclick="toggleTheme()">
        <span id="theme-icon">ğŸŒ™</span>
    </button>

    <div class="container">
        <!-- 1. é–‹å§‹é é¢ (éš±ç§æ¬ŠåŒæ„ä»‹é¢) -->
        <div id="start-screen" class="screen active">
            <h1>åœ¨é€™å€‹æ•¸ä½ä¸–ç•Œè£¡ï¼Œ<br>ä½ çš„éˆé­‚æœ‰å¤šã€èµ¤è£¸ã€ï¼Ÿ</h1>
            <p>ä¸€åˆ‡è³‡æ–™éƒ½æœ‰ä»£åƒ¹ã€‚<br>ä½ æº–å‚™å¥½é¢å°çœŸç›¸äº†å—ï¼Ÿ</p>
            
            <div class="privacy-box">
                <input type="checkbox" id="agree-chk" style="transform: scale(1.3); margin-right: 10px;">
                <label for="agree-chk" style="font-size:0.9rem; cursor:pointer; color:#999;">
                    æˆ‘å·²è©³ç´°é–±è®€ä¸¦åŒæ„ <span class="sim-link" onclick="openPolicy(); event.preventDefault();">éš±ç§æ¬Šè²æ˜</span>
                </label>
            </div>

            <button class="btn" onclick="checkStart()">é–‹å§‹æƒæ</button>

            <!-- å…è²¬è²æ˜ -->
            <div class="disclaimer-text">
                  è­¦å‘Šï¼šæœ¬éŠæˆ²åŒ…å«<strong>é–ƒçˆç‰¹æ•ˆ</strong>ï¼Œæ‚£æœ‰å…‰æ•æ€§ç™²ç™‡æˆ–å¿ƒè‡Ÿç–¾ç—…è€…è«‹å‹¿éŠç©ã€‚
            </div>
        </div>

        <!-- 2. æ¸¬é©—é é¢ (é€šç”¨é¡Œç›®) -->
        <div id="quiz-screen" class="screen">
            <div class="progress-container">
                <div id="progress-bar" class="progress-bar"></div>
            </div>
            <h2 id="question-text" style="min-height: 80px; display:flex; align-items:center; justify-content:center;">é¡Œç›®è¼‰å…¥ä¸­...</h2>
            <div style="margin-top: 40px;">
                <button class="btn" onclick="handleAnswer(true)">æ˜¯ / æœ‰</button>
                <button class="btn btn-secondary" onclick="handleAnswer(false)">å¦ / æ²’æœ‰</button>
            </div>
            <div style="margin-top: 30px; font-size: 0.8rem; opacity: 0.7;">
                *é»æ“Šé¸é …å³è‡ªå‹•é€²å…¥ä¸‹ä¸€é¡Œ
            </div>
        </div>

        <!-- 2.5 è£ç½®æƒææ¨¡æ“¬é é¢ (Q4 å°ˆç”¨) -->
        <div id="scan-simulation-screen" class="screen">
             <!-- é€²åº¦æ¢åœ¨ä¸Šæ–¹ä¿æŒä¸€è‡´æ„Ÿ -->
            <div class="progress-container">
                <div id="scan-quiz-bar" class="progress-bar"></div>
            </div>

            <h2>è£ç½®å®‰å…¨æƒæä¸­<span id="scan-dots">...</span></h2>
            
            <div class="virus-alert-text" id="virus-alert">
                âš ï¸ è­¦å‘Šï¼šç™¼ç¾ 1 å€‹åš´é‡å¨è„…ï¼
            </div>

            <div class="scan-progress-wrapper" id="scan-bar-wrapper">
                <div id="scan-fake-bar" class="scan-progress-bar"></div>
            </div>
            
            <p id="scan-status-text">æ­£åœ¨åˆ†æç³»çµ±æª”æ¡ˆ...</p>

            <!-- ä»¿çœŸæ¬Šé™è¦æ±‚è¦–çª— -->
            <div id="fake-perm-modal" class="fake-permission-modal">
                <div class="perm-header">
                    "SystemSecurity" æƒ³è¦ä½¿ç”¨æ‚¨çš„ç›¸æ©Ÿ
                </div>
                <div class="perm-body">
                    æ­¤ç¶²ç«™éœ€è¦ç›¸æ©Ÿæ¬Šé™ä»¥æƒæå¯¦é«”ç—…æ¯’èˆ‡æ¸…é™¤ã€‚
                </div>
                <div class="perm-actions">
                    <button class="perm-btn" onclick="finishScanGame(false)">å°é–</button>
                    <button class="perm-btn" onclick="finishScanGame(true)">å…è¨±</button>
                </div>
            </div>
        </div>


        <!-- 3. çµæœé é¢ -->
        <div id="result-screen" class="screen">
            <h2>æƒæå®Œæˆ</h2>
            <div id="final-score" class="result-score">0</div>
            
            <h3 id="result-title" class="result-title">ç¨±è™Ÿè¼‰å…¥ä¸­...</h3>
            <p id="result-comment" class="result-desc">è©•èªè¼‰å…¥ä¸­...</p>

            <div class="scroll-hint">â–¼ ä¸‹æ»‘æŸ¥çœ‹è§£æèˆ‡æ¨è–¦ â–¼</div>

            <!-- è§£æèˆ‡æ•™å­¸å€å¡Š -->
            <div class="explanation-container">
                <div class="section-header">è³‡å®‰å°æ•™å­¸</div>
                <div id="explanation-list">
                    <!-- JS è‡ªå‹•ç”Ÿæˆå…§å®¹ -->
                </div>
            </div>

            <!-- å·¥å…·æ¨è–¦å€å¡Š -->
            <div class="tools-container">
                <div class="section-header">ã€å·¥å…·æ¨è–¦ã€‘</div>
                
                <div class="tool-item">
                    <a href="https://www.virustotal.com/gui/home/upload" target="_blank" class="tool-link">
                        ğŸ›¡ï¸ VirusTotal
                    </a>
                    <p style="margin-bottom:0; font-size: 0.95rem;">
                        å…è²»çš„ç·šä¸Šå®‰å…¨æª¢æ¸¬å¹³å°ï¼Œå°ˆé–€ç”¨æ–¼æƒæå¯ç–‘æ–‡ä»¶ã€ç¶²å€ã€IP ä½å€å’Œç¶²åŸŸã€‚
                        <br><br>
                        <strong>ç‰¹é»ï¼š</strong>æ•´åˆäº†è¶…é 50-70 å¤šæ¬¾å…¨çƒçŸ¥åçš„é˜²æ¯’å¼•æ“ï¼Œæä¾›ç¶œåˆæ€§çš„å®‰å…¨å ±å‘Šã€‚
                    </p>
                </div>

                <div class="tool-item">
                    <a href="https://haveibeenpwned.com/Passwords" target="_blank" class="tool-link">
                        ğŸ” Have I Been Pwned
                    </a>
                    <p style="margin-bottom:0; font-size: 0.95rem;">
                        å…è²»çš„å¯†ç¢¼æª¢æ¸¬ç¶²ç«™ï¼Œæä¾›ä½¿ç”¨è€…æª¢æ¸¬å¯†ç¢¼æ˜¯å¦æ›¾ç¶“åœ¨å¤–æ´©äº‹ä»¶ä¸­æµå‡ºï¼Œå°è‡´è³‡æ–™é¢¨éšªã€‚
                    </p>
                </div>
            </div>

            <button class="btn" onclick="location.reload()" style="margin-top: 40px;">é‡æ–°æ¸¬é©—</button>
        </div>
    </div>

    <script>
        /**
         * Matrix èƒŒæ™¯ç‰¹æ•ˆè…³æœ¬
         */
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        const katakana = 'ã‚¢ã‚¡ã‚«ã‚µã‚¿ãƒŠãƒãƒãƒ¤ãƒ£ãƒ©ãƒ¯ã‚¬ã‚¶ãƒ€ãƒãƒ‘ã‚¤ã‚£ã‚­ã‚·ãƒãƒ‹ãƒ’ãƒŸãƒªã‚®ã‚¸ãƒ‚ãƒ“ãƒ”ã‚¦ã‚¥ã‚¯ã‚¹ãƒ„ãƒŒãƒ•ãƒ ãƒ¦ãƒ¥ãƒ«ã‚°ã‚ºãƒ–ãƒ…ãƒ—ã‚¨ã‚§ã‚±ã‚»ãƒ†ãƒãƒ˜ãƒ¡ãƒ¬ã‚²ã‚¼ãƒ‡ãƒ™ãƒšã‚ªã‚©ã‚³ã‚½ãƒˆãƒãƒ›ãƒ¢ãƒ¨ãƒ§ãƒ­ãƒ²ã‚´ã‚¾ãƒ‰ãƒœãƒãƒ´ãƒƒãƒ³';
        const latin = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        const nums = '0123456789';
        const alphabet = katakana + latin + nums;

        const fontSize = 16;
        let columns = Math.floor(canvas.width / fontSize);
        let drops = [];
        for(let x = 0; x < columns; x++) {
            drops[x] = 1;
        }

        function drawMatrix() {
            const isLight = document.body.classList.contains('light-mode');
            if (isLight) {
                ctx.fillStyle = 'rgba(240, 242, 245, 0.1)'; 
            } else {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.05)'; 
            }
            
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            if (isLight) {
                ctx.fillStyle = '#008f24'; 
            } else {
                ctx.fillStyle = '#0F0'; 
            }
            
            ctx.font = fontSize + 'px monospace';

            for(let i = 0; i < drops.length; i++) {
                const text = alphabet.charAt(Math.floor(Math.random() * alphabet.length));
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                if(drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }
        setInterval(drawMatrix, 30);


        /**
         * éŠæˆ²é‚è¼¯è…³æœ¬
         */
        // åˆå§‹åŒ–éŸ³æ•ˆ (éœ€æº–å‚™ horrible.mp3)
        const scareAudio = new Audio('horrible.mp3');
        scareAudio.volume = 1.0; 

        // é¡Œç›®è³‡æ–™åº« (index 0 æ˜¯éš±ç§æ¬Šæª¢æŸ¥, index 4 æ”¹ç‚ºè£ç½®æƒæå°éŠæˆ²)
        const questions = [
            {
                text: "æ˜¯å¦ä»”ç´°é–±è®€éš±ç§æ¬Šæ¢æ¬¾ï¼Ÿ",
                logic: "special", // ç‰¹æ®Šé‚è¼¯
                explanation: "é­”é¬¼è—åœ¨ç´°ç¯€è£¡ã€‚è¨±å¤šæƒ¡æ„æ¢æ¬¾ï¼ˆå¦‚å‡ºå”®å€‹è³‡ã€å­˜å–é€šè¨ŠéŒ„ï¼‰å¸¸è—åœ¨é•·ç¯‡å¤§è«–ä¸­ã€‚ç›´æ¥å‹¾é¸åŒæ„ç­‰æ–¼å°‡æ•¸ä½éˆé­‚æ‹±æ‰‹è®“äººã€‚",
            },
            { 
                text: "å¸¸ç”¨å¯†ç¢¼æ˜¯å¦è¶…é 8 ç¢¼ï¼Ÿ", 
                logic: "checked",
                explanation: "é•·åº¦æ˜¯å¯†ç¢¼å¼·åº¦çš„é—œéµã€‚å»ºè­°ä½¿ç”¨è¤‡é›œåº¦é«˜ä¸”é•·åº¦è¶³å¤ çš„å¯†ç¢¼ã€‚",
                image: "password.png" 
            },
            { 
                text: "å¸¸ç”¨å¯†ç¢¼æ˜¯å¦åŒ…å«å€‹äººè³‡è¨Šï¼Ÿï¼ˆå¦‚ç”Ÿæ—¥ã€æ‰‹æ©Ÿã€å§“åï¼‰", 
                logic: "unchecked",
                explanation: "è‹¥é§­å®¢æˆåŠŸç›œå–ä½ çš„å€‹äººè³‡è¨Šï¼Œé‚£ä½ çš„å¯†ç¢¼è¢«ç ´è§£çš„é¢¨éšªæé«˜ã€‚é¿å…å°‡å…¬é–‹è³‡è¨Šè¨­ç‚ºå¯†ç¢¼ã€‚"
            },
            { 
                text: "ä½ æœƒé€£å…¬å…± Wifi å—ï¼Ÿï¼ˆå¦‚æ˜Ÿå·´å…‹ã€åœ–æ›¸é¤¨ï¼‰", 
                logic: "unchecked",
                explanation: "ä½ çš„ç€è¦½è³‡è¨Šã€å€‹äººè³‡è¨Šå¯èƒ½é€éå…¬å…±ç¶²è·¯è¢«æœ‰å¿ƒäººå£«åˆ©ç”¨ã€ç«Šå–ã€‚å»ºè­°ä½¿ç”¨ VPN æˆ–è‡ªå·±çš„è¡Œå‹•æ•¸æ“šã€‚"
            },
            { 
                text: "é‡åˆ°ç—…æ¯’è­¦å‘Šä¸¦è¦æ±‚ç›¸æ©Ÿæ¬Šé™æ™‚ï¼Œä½ æœƒï¼Ÿ", 
                logic: "unchecked", // é€™è£¡ unchecked ä»£è¡¨æ‹’çµ•æ¬Šé™(æ­£ç¢º)
                explanation: "é€™æ˜¯å…¸å‹çš„ã€Œæåš‡è»Ÿé«”ã€æˆ–ã€Œç¤¾æœƒå·¥ç¨‹ã€æ‰‹æ³•ã€‚é§­å®¢åˆ©ç”¨å½é€ çš„ç—…æ¯’è­¦å‘Šè®“ä½¿ç”¨è€…ææ…Œï¼Œé€²è€Œèª˜é¨™é»æ“Šã€Œå…è¨±ã€æ¬Šé™ï¼ˆå¦‚ç›¸æ©Ÿã€ä¸‹è¼‰ï¼‰ï¼Œå¯¦éš›ä¸Šæ˜¯ç‚ºäº†æ¤å…¥çœŸæ­£çš„æœ¨é¦¬æˆ–ç«Šå–éš±ç§ã€‚"
            },
            { 
                text: "çœ‹åˆ°åˆ¥äººå‚³çš„é€£çµæœƒç›´æ¥é»é–‹å—ï¼Ÿ", 
                logic: "unchecked",
                explanation: "ç›´æ¥é»æ“Šé€£çµæé«˜è£ç½®ä¸­æ¯’æ©Ÿç‡ï¼Œæˆ–ç›´æ¥èª¤å…¥é‡£é­šç¶²ç«™ã€‚è«‹ç¢ºèªä¾†æºï¼Œæˆ–ä½¿ç”¨å®˜æ–¹ APP é€²å…¥ã€‚"
            },
            { 
                text: "çŸ¥é“æä¾›çš„è³‡æ–™æœƒè¢«ç”¨ä¾†æ¨æ’­å»£å‘Šå—ï¼Ÿ", 
                logic: "checked",
                explanation: "æ˜¯ä¸æ˜¯æœ‰å‰›è¬›è¦åƒéºµï¼Œä¸‹ä¸€ç§’åˆ·æ–°è‡‰æ›¸æ™‚å°±è·³å‡ºéºµåº—å»£å‘Šï¼Ÿå€‹äººè³‡æ–™ï¼ˆå¦‚ç€è¦½ç´€éŒ„ã€æœå°‹å…§å®¹ï¼‰å¸¸è¢«ç¶²ç«™é€é Cookie èˆ‡å»£å‘Šå•†è¿½è¹¤ã€‚"
            },
            { 
                text: "çŸ¥é“å·²æä¾›çš„å€‹äººè³‡è¨Šå¯è¦æ±‚å®˜æ–¹åˆªé™¤å—ï¼Ÿ", 
                logic: "checked",
                explanation: "æ ¹æ“šã€Šå€‹äººè³‡æ–™ä¿è­·æ³•ã€‹ï¼Œæ°‘çœ¾æœ‰æ¬Šè¦æ±‚ä¼æ¥­æˆ–æ©Ÿæ§‹åˆªé™¤å·²æä¾›çš„å€‹äººè³‡æ–™ï¼ˆå¦‚çµ‚æ­¢æœå‹™æ™‚ï¼‰ï¼ŒåŒ…æ‹¬è¦æ±‚æŸ¥é–±ã€åœæ­¢è™•ç†æˆ–åˆªé™¤ã€‚"
            },
            { 
                text: "çŸ¥é“åœ¨å…¬å¸ã€å­¸æ ¡ä½¿ç”¨ç„¡ç—•è¦–çª—é‚„æ˜¯æœƒç•™ä¸‹ç´€éŒ„å—ï¼Ÿ", 
                logic: "checked",
                explanation: "ç„¡ç—•æ¨¡å¼åªæœ‰ã€Œå°è‡ªå·±ç„¡ç—•ã€ï¼Œç„¡æ³•ä¿è­·ä½ çš„ç€è¦½è¡Œç‚ºä¸è¢«ç¶²è·¯ç®¡ç†å“¡çœ‹åˆ°ã€‚å…¬å¸ç¶²è·¯è¨­å‚™é€šå¸¸å¯ä»¥è¿½è¹¤ä¸¦ä¿ç•™æ‰€æœ‰ç´€éŒ„ã€‚"
            },
            { 
                text: "ä½ æœƒå€åˆ†åŠŸèƒ½ä½¿ç”¨ä¸åŒå¸³è™Ÿå—ï¼Ÿ", 
                logic: "checked",
                explanation: "å€åˆ†å·¥ä½œèˆ‡å€‹äººå¸³è™Ÿæ˜¯é«˜è³‡å®‰æ„è­˜çš„è¡¨ç¾ï¼Œèƒ½æœ‰æ•ˆé˜²æ­¢å–®ä¸€å¸³è™Ÿæ´©æ¼å¾Œï¼Œå°è‡´å€‹äººçš„æ‰€æœ‰è¡Œè¹¤èˆ‡åå¥½è¢«ç³»çµ±å…¨é¢æŒæ¡ã€‚"
            }
        ];

        let currentQuestionIndex = 1; // å¾ç¬¬ 1 é¡Œé–‹å§‹ (ç¬¬ 0 é¡Œæ˜¯éš±ç§æ¬Š)
        let score = 0;
        let userResults = []; 

        function openPolicy() {
            document.getElementById('privacy-modal').style.display = 'flex';
        }
        function closePolicy() {
            document.getElementById('privacy-modal').style.display = 'none';
        }

        function checkStart() {
            const chk = document.getElementById('agree-chk');
            if (!chk.checked) {
                alert("è«‹å‹¾é¸åŒæ„éš±ç§æ¬Šè²æ˜æ‰èƒ½ç¹¼çºŒ (æˆ–è€…...ä½ å¯ä»¥å…ˆè®€è®€çœ‹?)");
                return;
            }
            startGame(false);
        }

        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            const icon = document.getElementById('theme-icon');
            if (document.body.classList.contains('light-mode')) {
                icon.innerText = "â˜€ï¸";
            } else {
                icon.innerText = "ğŸŒ™";
            }
        }

        function startGame(bonus) {
            window.scrollTo(0, 0);
            closePolicy();
            document.getElementById('start-screen').classList.remove('active');
            document.getElementById('quiz-screen').classList.add('active');
            
            currentQuestionIndex = 1; 
            userResults = [];
            
            if (bonus) {
                score = 10;
                userResults[0] = true; 
            } else {
                score = 0;
                userResults[0] = false; 
            }

            showQuestion();
        }

        function showQuestion() {
            const totalQuizQ = questions.length - 1;
            const currentProgress = currentQuestionIndex - 1;
            
            const progressPercent = (currentProgress / totalQuizQ) * 100;
            document.getElementById('progress-bar').style.width = `${progressPercent}%`;

            const currentQ = questions[currentQuestionIndex];
            document.getElementById('question-text').innerText = `${currentQuestionIndex}. ${currentQ.text}`;
        }

        // Q4 æ¨¡æ“¬éŠæˆ²é‚è¼¯
        function startScanGame() {
            // éš±è—ä¸€èˆ¬å•ç­”ä»‹é¢
            document.getElementById('quiz-screen').classList.remove('active');
            // é¡¯ç¤ºæƒææ¨¡æ“¬ä»‹é¢
            document.getElementById('scan-simulation-screen').classList.add('active');
            
            // æ›´æ–°ä¸Šæ–¹é€²åº¦æ¢ (è®“ä½¿ç”¨è€…çŸ¥é“é‚„åœ¨æ¸¬é©—ä¸­)
            const totalQuizQ = questions.length - 1;
            const currentProgress = currentQuestionIndex - 1;
            const progressPercent = (currentProgress / totalQuizQ) * 100;
            document.getElementById('scan-quiz-bar').style.width = `${progressPercent}%`;

            // é‡ç½®ç‹€æ…‹
            document.getElementById('virus-alert').style.display = 'none';
            document.getElementById('fake-perm-modal').style.display = 'none';
            document.getElementById('scan-bar-wrapper').style.display = 'block';
            document.getElementById('scan-status-text').innerText = "æ­£åœ¨åˆ†æç³»çµ±æª”æ¡ˆ...";
            document.getElementById('scan-fake-bar').style.width = '0%';
            
            // é»é»å‹•ç•«
            let dots = 0;
            const dotInterval = setInterval(() => {
                dots = (dots + 1) % 4;
                document.getElementById('scan-dots').innerText = '.'.repeat(dots);
            }, 400);

            // å¿½å¿«å¿½æ…¢çš„é€²åº¦æ¢
            let width = 0;
            const runProgress = () => {
                if (width >= 100) {
                    clearInterval(dotInterval);
                    showVirusAlert();
                    return;
                }
                
                // éš¨æ©Ÿå¢åŠ å¯¬åº¦ (æ¨¡æ“¬å¡é “èˆ‡å¿«é€Ÿé‹ç®—)
                let jump = Math.random() * 15; 
                width += jump;
                if(width > 100) width = 100;
                
                document.getElementById('scan-fake-bar').style.width = width + '%';
                
                // éš¨æ©Ÿå»¶é²ä¸‹æ¬¡æ›´æ–°
                let delay = Math.random() * 500;
                if(width > 80) delay += 400; // æœ€å¾Œè·‘æ…¢ä¸€é»å¢åŠ ç·Šå¼µæ„Ÿ
                
                setTimeout(runProgress, delay);
            };
            
            runProgress();
        }

        function showVirusAlert() {
            document.getElementById('scan-status-text').innerText = "æƒæå®Œæˆ";
            document.getElementById('scan-bar-wrapper').style.display = 'none';
            
            // é¡¯ç¤ºç´…å­—è­¦å‘Š
            const alertBox = document.getElementById('virus-alert');
            alertBox.style.display = 'block';

            // å…©ç§’å¾Œå½ˆå‡ºæ¬Šé™è¦–çª—
            setTimeout(() => {
                const modal = document.getElementById('fake-perm-modal');
                modal.style.display = 'block';
            }, 2000);
        }

        function finishScanGame(userAllowed) {
            // é‚è¼¯: userAllowed = true (é»æ“Šå…è¨±) -> é€™æ˜¯éŒ¯èª¤çš„è¡Œç‚º -> 0åˆ† + é©šåš‡
            //       userAllowed = false (é»æ“Šå°é–) -> é€™æ˜¯æ­£ç¢ºçš„è¡Œç‚º -> 10åˆ†
            
            let gotPoint = false;
            
            if (userAllowed) {
                // é»äº†å…è¨± -> è§¸ç™¼é§­å®¢é©šåš‡
                triggerScare();
                gotPoint = false;
            } else {
                // é»äº†å°é– -> æ­£ç¢º
                score += 10;
                gotPoint = true;
            }

            userResults[currentQuestionIndex] = gotPoint;
            
            // åˆ‡æ›å›ä¸‹ä¸€é¡Œ
            currentQuestionIndex++;
            document.getElementById('scan-simulation-screen').classList.remove('active');
            
            // å¦‚æœå‰›è¢«åš‡ï¼Œå¤šç­‰ä¸€ä¸‹å†é¡¯ç¤ºä¸‹ä¸€é¡Œ
            const delay = userAllowed ? 1100 : 0;
            
            setTimeout(() => {
                if (currentQuestionIndex < questions.length) {
                    document.getElementById('quiz-screen').classList.add('active');
                    showQuestion();
                } else {
                    document.getElementById('quiz-screen').classList.add('active'); // showResulté è¨­æ˜¯å¾quiz-screenåˆ‡æ›
                    showResult();
                }
            }, delay);
        }


        // è§¸ç™¼é©šåš‡æ•ˆæœ + éŸ³æ•ˆ
        function triggerScare() {
            const scareEl = document.getElementById('hacker-scare');
            const flashEl = document.getElementById('red-flash');
            
            scareEl.classList.remove('scare-active');
            flashEl.classList.remove('flash-active');
            
            void scareEl.offsetWidth; 
            
            scareEl.classList.add('scare-active');
            flashEl.classList.add('flash-active');

            try {
                scareAudio.currentTime = 0; 
                scareAudio.play().catch(e => {
                    console.log('Audio play failed:', e);
                });
            } catch (error) {
                console.log("Audio Error:", error);
            }

            // 1ç§’å¾Œè‡ªå‹•ç§»é™¤
            setTimeout(() => {
                scareEl.classList.remove('scare-active');
                flashEl.classList.remove('flash-active');
            }, 1000);
        }

        function handleAnswer(userClickedYes) {
            const currentQ = questions[currentQuestionIndex];
            let gotPoint = false;

            if (currentQ.logic === 'checked') {
                if (userClickedYes) gotPoint = true;
            } else if (currentQ.logic === 'unchecked') {
                if (!userClickedYes) gotPoint = true;
            }

            if (gotPoint) {
                score += 10;
            } else {
                triggerScare();
            }

            userResults[currentQuestionIndex] = gotPoint; 
            currentQuestionIndex++;

            const delay = gotPoint ? 0 : 1100;

            setTimeout(() => {
                // æª¢æŸ¥æ˜¯å¦ä¸‹ä¸€é¡Œæ˜¯ç¬¬ 4 é¡Œ (æ¨¡æ“¬è£ç½®æƒæ)
                // æ³¨æ„ï¼šcurrentQuestionIndex å·²ç¶“åŠ  1 äº†
                // å¦‚æœç¾åœ¨ currentQuestionIndex æ˜¯ 4ï¼Œä»£è¡¨è©²é¡¯ç¤ºç¬¬ 4 é¡Œ
                if (currentQuestionIndex === 4) {
                    startScanGame();
                } else if (currentQuestionIndex < questions.length) {
                    showQuestion();
                } else {
                    showResult();
                }
            }, delay);
        }

        function showResult() {
            document.getElementById('quiz-screen').classList.remove('active');
            document.getElementById('scan-simulation-screen').classList.remove('active'); // ç¢ºä¿æƒæé é—œé–‰
            document.getElementById('result-screen').classList.add('active');
            window.scrollTo(0, 0);

            const scoreEl = document.getElementById('final-score');
            let tempScore = 0;
            const interval = setInterval(() => {
                scoreEl.innerText = tempScore;
                if (tempScore >= score) {
                    clearInterval(interval);
                    analyzeResult();
                }
                tempScore++;
            }, 20);

            if (score === 0) {
                scoreEl.innerText = 0;
                analyzeResult();
            }

            renderExplanations();
        }

        function analyzeResult() {
            const titleEl = document.getElementById('result-title');
            const commentEl = document.getElementById('result-comment');
            let title = "";
            let comment = "";
            let color = "";

            if (score >= 0 && score < 30) {
                title = "è³‡å®‰è¦‹ç¿’è€…";
                comment = "ä½ çš„å¸³è™Ÿå¯èƒ½å·²ç¶“è¢«ç›œäº†ï¼è«‹ç«‹åˆ»å±•é–‹è¡Œå‹•ä¿®è£œæ¼æ´ã€‚";
                color = "var(--danger-color)"; 
            } else if (score >= 30 && score < 60) {
                title = "è³‡å®‰å…¥é–€è€…";
                comment = "ä½ çš„è³‡è¨Šå¯èƒ½å·²ç¶“è¢«è³£çµ¦å»£å‘Šå•†äº†ï¼å°å¿ƒï¼Œä½ æ­£åœ¨è£¸å¥”çš„é‚Šç·£ã€‚";
                color = "#e6e600"; 
            } else {
                title = "è³‡å®‰è³‡å„ªç”Ÿ";
                comment = "é§­å®¢çœ‹åˆ°ä½ éƒ½è¦ºå¾—é ­ç—›ï¼ä½ çš„é˜²ç¦¦å›ºè‹¥é‡‘æ¹¯ï¼Œè«‹ç¹¼çºŒä¿æŒã€‚";
                color = "var(--primary-color)"; 
            }

            titleEl.innerText = title;
            titleEl.style.color = color;
            commentEl.innerText = comment;
        }

        function renderExplanations() {
            const list = document.getElementById('explanation-list');
            list.innerHTML = ""; 

            questions.forEach((q, index) => {
                const item = document.createElement('div');
                const isCorrect = userResults[index];
                
                item.className = isCorrect ? 'exp-item' : 'exp-item wrong-item';
                
                let imgHtml = "";
                if (q.image) {
                    imgHtml = `<img src="${q.image}" alt="ç¤ºæ„åœ–" class="exp-img">`;
                }

                let qTitle = "";
                if (index === 0) {
                    qTitle = "ã€éš±è—é—œå¡ã€‘éš±ç§æ¬Šè²æ˜é™·é˜±";
                } else {
                    qTitle = `Q${index}: ${q.text}`;
                }

                item.innerHTML = `
                    <span class="exp-q">
                        ${qTitle}
                        <span class="wrong-tag">âš ï¸ è³‡å®‰æ¼æ´</span>
                    </span>
                    <div class="exp-text">
                        ${q.explanation}
                        ${imgHtml}
                    </div>
                `;
                list.appendChild(item);
            });
        }
    </script>
</body>
</html>