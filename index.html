<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•¸ä½éˆé­‚æ¸¬é©— - é§­å®¢ç‰ˆ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Noto+Sans+TC:wght@400;700&display=swap');

        /* å®šç¾©è®Šæ•¸ - æš—é»‘æ¨¡å¼ (é è¨­) */
        :root {
            --bg-color: #000000;
            --panel-bg: rgba(0, 0, 0, 0.9); /* åŠ æ·±èƒŒæ™¯ä¸é€æ˜åº¦ä»¥å‡¸é¡¯æ–‡å­— */
            --text-color: #e0e0e0;
            --primary-color: #00ff41; /* é§­å®¢ç¶  */
            --secondary-color: #b026ff; /* è³½åšç´« */
            --danger-color: #ff003c; /* è­¦å‘Šç´… */
            --border-color: #00ff41;
            --shadow-color: rgba(0, 255, 65, 0.3);
            --btn-hover-text: #000;
        }

        /* æ˜äº®æ¨¡å¼è®Šæ•¸ */
        body.light-mode {
            --bg-color: #f0f2f5;
            --panel-bg: rgba(255, 255, 255, 0.95);
            --text-color: #333333;
            --primary-color: #008f24;
            --secondary-color: #7a00cc;
            --danger-color: #d6002a;
            --border-color: #008f24;
            --shadow-color: rgba(0, 143, 36, 0.2);
            --btn-hover-text: #fff;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Share Tech Mono', 'Noto Sans TC', monospace;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            overflow-x: hidden;
            position: relative;
            padding: 20px 0;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Matrix Canvas èƒŒæ™¯ */
        #matrix-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0; /* æœ€åº•å±¤ */
            opacity: 0.8;
        }

        /* CRT æƒæç·šç‰¹æ•ˆ (ç–Šåœ¨ Canvas ä¹‹ä¸Š) */
        body:not(.light-mode)::before {
            content: " ";
            display: block;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 1; /* æ¯” Canvas é«˜ */
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
        }

        /* é§­å®¢é©šåš‡å±¤ */
        #hacker-scare {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('hacker.png'); /* è«‹ç¢ºä¿æœ‰é€™å¼µåœ– */
            background-position: center;
            background-size: cover;
            background-repeat: no-repeat;
            z-index: 9999; /* æœ€é ‚å±¤ */
            opacity: 0;
            pointer-events: none;
            display: none; /* é è¨­ä¸é¡¯ç¤º */
            mix-blend-mode: hard-light; /* è®“åœ–ç‰‡èˆ‡èƒŒæ™¯èåˆæ›´åƒé›œè¨Š */
        }

        /* é©šåš‡å‹•ç•« Class */
        .scare-active {
            display: block !important;
            animation: glitch-anim 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
        }

        @keyframes glitch-anim {
            0% { opacity: 0; transform: translate(0); filter: hue-rotate(0deg); }
            20% { opacity: 0.8; transform: translate(-10px, 10px); filter: hue-rotate(90deg) invert(1); }
            40% { opacity: 1; transform: translate(10px, -10px); filter: contrast(2); }
            60% { opacity: 0.8; transform: translate(-5px, 5px); }
            80% { opacity: 0.2; transform: translate(5px, -5px); }
            100% { opacity: 0; transform: translate(0); }
        }

        /* ç´…è‰²é–ƒçˆè¦†è“‹å±¤ (é…åˆé©šåš‡) */
        #red-flash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 0, 0, 0.3);
            z-index: 9998;
            opacity: 0;
            pointer-events: none;
        }
        .flash-active {
            animation: flash-anim 0.3s ease-out;
        }
        @keyframes flash-anim {
            0% { opacity: 0.8; }
            100% { opacity: 0; }
        }

        /* ä¸»é¡Œåˆ‡æ›æŒ‰éˆ• */
        #theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: var(--panel-bg);
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            padding: 10px 15px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s;
            box-shadow: 0 0 10px var(--shadow-color);
        }
        
        #theme-toggle:hover {
            transform: scale(1.1);
            background: var(--primary-color);
            color: var(--btn-hover-text);
        }

        .container {
            width: 95%;
            max-width: 700px;
            background: var(--panel-bg);
            border: 1px solid var(--border-color);
            box-shadow: 0 0 15px var(--shadow-color);
            padding: 30px;
            position: relative;
            z-index: 10;
            text-align: center;
            border-radius: 8px;
            margin-top: 5vh;
            margin-bottom: 5vh;
            transition: background 0.3s, border 0.3s;
            backdrop-filter: blur(5px); /* æ¯›ç»ç’ƒæ•ˆæœ */
        }

        h1, h2, h3 {
            text-transform: uppercase;
            margin-bottom: 20px;
        }

        h1 {
            color: var(--primary-color);
            text-shadow: 0 0 8px var(--shadow-color);
            font-size: 2rem;
            line-height: 1.4;
        }

        h2 { font-size: 1.5rem; color: var(--text-color); }
        
        p {
            font-size: 1.1rem;
            margin-bottom: 30px;
            line-height: 1.8;
            color: var(--text-color);
        }

        .btn {
            background: rgba(0,0,0,0.5);
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            padding: 15px 30px;
            font-size: 1.2rem;
            cursor: pointer;
            font-family: inherit;
            transition: all 0.3s ease;
            margin: 10px;
            text-shadow: 0 0 2px var(--shadow-color);
            width: 100%;
            max-width: 250px;
            border-radius: 4px;
        }

        .btn:hover {
            background: var(--primary-color);
            color: var(--btn-hover-text);
            box-shadow: 0 0 20px var(--shadow-color);
        }

        .btn-secondary {
            color: var(--secondary-color);
            border-color: var(--secondary-color);
        }

        .btn-secondary:hover {
            background: var(--secondary-color);
            color: #fff;
            box-shadow: 0 0 20px rgba(176, 38, 255, 0.4);
        }

        .screen {
            display: none;
            width: 100%;
            animation: fadeIn 0.8s ease-in-out;
        }

        .active {
            display: block;
        }

        .progress-container {
            width: 100%;
            background-color: #444;
            height: 6px;
            margin-bottom: 30px;
            border-radius: 3px;
            overflow: hidden;
        }
        
        body.light-mode .progress-container {
            background-color: #ddd;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        .result-score {
            font-size: 5rem;
            font-weight: bold;
            color: var(--primary-color);
            text-shadow: 0 0 20px var(--shadow-color);
            margin: 20px 0;
        }

        .result-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .result-desc {
            font-size: 1.2rem;
            margin-bottom: 40px;
            border-bottom: 1px dashed var(--text-color);
            padding-bottom: 30px;
        }

        .explanation-container, .tools-container {
            text-align: left;
            margin-top: 30px;
        }

        .section-header {
            text-align: center;
            color: var(--secondary-color);
            border: 1px solid var(--secondary-color);
            padding: 10px 20px;
            margin: 0 auto 30px auto;
            display: table;
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(176, 38, 255, 0.2);
            background: rgba(0,0,0,0.5);
        }

        .exp-item {
            background: rgba(128, 128, 128, 0.1);
            border-left: 5px solid var(--primary-color);
            margin-bottom: 25px;
            padding: 20px;
            border-radius: 0 5px 5px 0;
            transition: transform 0.2s;
        }

        .exp-item.wrong-item {
            border-left-color: var(--danger-color);
            background: rgba(255, 0, 60, 0.1);
        }

        .exp-item:hover {
            transform: translateX(5px);
        }

        .exp-q {
            color: var(--primary-color);
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 10px;
            display: block;
        }

        .exp-item.wrong-item .exp-q {
            color: var(--danger-color);
        }
        
        .wrong-tag {
            font-size: 0.8rem;
            background: var(--danger-color);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 10px;
            vertical-align: middle;
            display: none;
        }
        
        .exp-item.wrong-item .wrong-tag {
            display: inline-block;
        }

        .exp-text {
            font-size: 0.95rem;
            color: var(--text-color);
            line-height: 1.6;
        }

        .exp-img {
            max-width: 100%;
            border: 2px solid var(--text-color);
            margin-top: 15px;
            opacity: 0.9;
        }

        .tool-item {
            border: 1px solid var(--text-color);
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 5px;
            background: rgba(0,0,0,0.3);
        }
        
        body.light-mode .tool-item {
            background: rgba(255,255,255,0.5);
            border-color: #ccc;
        }

        .tool-link {
            color: var(--primary-color);
            font-size: 1.2rem;
            font-weight: bold;
            text-decoration: none;
            display: block;
            margin-bottom: 10px;
            word-break: break-all;
        }

        .tool-link:hover {
            text-decoration: underline;
        }

        .scroll-hint {
            margin-top: -20px;
            margin-bottom: 30px;
            font-size: 0.9rem;
            color: var(--secondary-color);
            animation: bounce 2s infinite;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }

        /* RWD */
        @media (max-width: 600px) {
            .container { margin-top: 2vh; padding: 20px; }
            h1 { font-size: 1.5rem; }
            .result-score { font-size: 3.5rem; }
            #theme-toggle { top: 10px; right: 10px; padding: 8px 12px; }
        }
    </style>
</head>
<body>

    <!-- èƒŒæ™¯ç‰¹æ•ˆ Canvas -->
    <canvas id="matrix-canvas"></canvas>

    <!-- é§­å®¢é©šåš‡å±¤ -->
    <div id="hacker-scare"></div>
    <div id="red-flash"></div>

    <!-- æ—¥å¤œæ¨¡å¼åˆ‡æ›æŒ‰éˆ• -->
    <button id="theme-toggle" onclick="toggleTheme()">
        <span id="theme-icon">ğŸŒ™</span>
    </button>

    <div class="container">
        <!-- 1. é–‹å§‹é é¢ -->
        <div id="start-screen" class="screen active">
            <h1>åœ¨é€™å€‹æ•¸ä½ä¸–ç•Œè£¡ï¼Œ<br>ä½ çš„éˆé­‚æœ‰å¤šã€èµ¤è£¸ã€ï¼Ÿ</h1>
            <p>ä¸€åˆ‡è³‡æ–™éƒ½æœ‰ä»£åƒ¹ã€‚<br>ä½ æº–å‚™å¥½é¢å°çœŸç›¸äº†å—ï¼Ÿ</p>
            <button class="btn" onclick="startGame()">é–‹å§‹æƒæ</button>
        </div>

        <!-- 2. æ¸¬é©—é é¢ -->
        <div id="quiz-screen" class="screen">
            <div class="progress-container">
                <div id="progress-bar" class="progress-bar"></div>
            </div>
            <h2 id="question-text" style="min-height: 80px; display:flex; align-items:center; justify-content:center;">é¡Œç›®è¼‰å…¥ä¸­...</h2>
            <div style="margin-top: 40px;">
                <button class="btn" onclick="handleAnswer(true)">æ˜¯ / æœ‰</button>
                <button class="btn btn-secondary" onclick="handleAnswer(false)">å¦ / æ²’æœ‰</button>
            </div>
            <div style="margin-top: 30px; font-size: 0.8rem; opacity: 0.7;">
                *é»æ“Šé¸é …å³è‡ªå‹•é€²å…¥ä¸‹ä¸€é¡Œ
            </div>
        </div>

        <!-- 3. çµæœé é¢ -->
        <div id="result-screen" class="screen">
            <h2>æƒæå®Œæˆ</h2>
            <div id="final-score" class="result-score">0</div>
            
            <h3 id="result-title" class="result-title">ç¨±è™Ÿè¼‰å…¥ä¸­...</h3>
            <p id="result-comment" class="result-desc">è©•èªè¼‰å…¥ä¸­...</p>

            <div class="scroll-hint">â–¼ ä¸‹æ»‘æŸ¥çœ‹è§£æèˆ‡æ¨è–¦ â–¼</div>

            <!-- è§£æèˆ‡æ•™å­¸å€å¡Š -->
            <div class="explanation-container">
                <div class="section-header">è³‡å®‰å°æ•™å­¸</div>
                <div id="explanation-list">
                    <!-- JS è‡ªå‹•ç”Ÿæˆå…§å®¹ -->
                </div>
            </div>

            <!-- å·¥å…·æ¨è–¦å€å¡Š -->
            <div class="tools-container">
                <div class="section-header">ã€å·¥å…·æ¨è–¦ã€‘</div>
                
                <div class="tool-item">
                    <a href="https://www.virustotal.com/gui/home/upload" target="_blank" class="tool-link">
                        ğŸ›¡ï¸ VirusTotal
                    </a>
                    <p style="margin-bottom:0; font-size: 0.95rem;">
                        å…è²»çš„ç·šä¸Šå®‰å…¨æª¢æ¸¬å¹³å°ï¼Œå°ˆé–€ç”¨æ–¼æƒæå¯ç–‘æ–‡ä»¶ã€ç¶²å€ã€IP ä½å€å’Œç¶²åŸŸã€‚
                        <br><br>
                        <strong>ç‰¹é»ï¼š</strong>æ•´åˆäº†è¶…é 50-70 å¤šæ¬¾å…¨çƒçŸ¥åçš„é˜²æ¯’å¼•æ“ï¼Œæä¾›ç¶œåˆæ€§çš„å®‰å…¨å ±å‘Šã€‚
                    </p>
                </div>

                <div class="tool-item">
                    <a href="https://haveibeenpwned.com/Passwords" target="_blank" class="tool-link">
                        ğŸ” Have I Been Pwned
                    </a>
                    <p style="margin-bottom:0; font-size: 0.95rem;">
                        å…è²»çš„å¯†ç¢¼æª¢æ¸¬ç¶²ç«™ï¼Œæä¾›ä½¿ç”¨è€…æª¢æ¸¬å¯†ç¢¼æ˜¯å¦æ›¾ç¶“åœ¨å¤–æ´©äº‹ä»¶ä¸­æµå‡ºï¼Œå°è‡´è³‡æ–™é¢¨éšªã€‚
                    </p>
                </div>
            </div>

            <button class="btn" onclick="location.reload()" style="margin-top: 40px;">é‡æ–°æ¸¬é©—</button>
        </div>
    </div>

    <script>
        /**
         * Matrix èƒŒæ™¯ç‰¹æ•ˆè…³æœ¬
         */
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');

        // è¨­å®š Canvas å¤§å°
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        // Matrix å­—å…ƒ (ç‰‡å‡å + æ‹‰ä¸å­—æ¯ + æ•¸å­—)
        const katakana = 'ã‚¢ã‚¡ã‚«ã‚µã‚¿ãƒŠãƒãƒãƒ¤ãƒ£ãƒ©ãƒ¯ã‚¬ã‚¶ãƒ€ãƒãƒ‘ã‚¤ã‚£ã‚­ã‚·ãƒãƒ‹ãƒ’ãƒŸãƒªã‚®ã‚¸ãƒ‚ãƒ“ãƒ”ã‚¦ã‚¥ã‚¯ã‚¹ãƒ„ãƒŒãƒ•ãƒ ãƒ¦ãƒ¥ãƒ«ã‚°ã‚ºãƒ–ãƒ…ãƒ—ã‚¨ã‚§ã‚±ã‚»ãƒ†ãƒãƒ˜ãƒ¡ãƒ¬ã‚²ã‚¼ãƒ‡ãƒ™ãƒšã‚ªã‚©ã‚³ã‚½ãƒˆãƒãƒ›ãƒ¢ãƒ¨ãƒ§ãƒ­ãƒ²ã‚´ã‚¾ãƒ‰ãƒœãƒãƒ´ãƒƒãƒ³';
        const latin = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        const nums = '0123456789';
        const alphabet = katakana + latin + nums;

        const fontSize = 16;
        let columns = Math.floor(canvas.width / fontSize);
        // ç´€éŒ„æ¯è¡Œè½ä¸‹åˆ°å“ªå€‹ Y åº§æ¨™ (åˆå§‹åŒ–ç‚º 1)
        let drops = [];
        for(let x = 0; x < columns; x++) {
            drops[x] = 1;
        }

        // ç¹ªè£½å‡½å¼
        function drawMatrix() {
            // æ¯æ¬¡ç¹ªè£½æ™‚åŠ ä¸ŠåŠé€æ˜é»‘è‰²é®ç½©ï¼Œè£½é€ æ®˜å½±æ•ˆæœ
            // å¦‚æœæ˜¯äº®è‰²æ¨¡å¼ï¼Œé®ç½©æ”¹ç‚ºç™½è‰²
            const isLight = document.body.classList.contains('light-mode');
            
            if (isLight) {
                ctx.fillStyle = 'rgba(240, 242, 245, 0.1)'; // æ·¡è‰²èƒŒæ™¯æ®˜å½±
            } else {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.05)'; // é»‘è‰²èƒŒæ™¯æ®˜å½±
            }
            
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // è¨­å®šæ–‡å­—é¡è‰²å’Œå­—å‹
            if (isLight) {
                ctx.fillStyle = '#008f24'; // äº®è‰²æ¨¡å¼ç”¨æ·±ç¶ è‰²å­—
            } else {
                ctx.fillStyle = '#0F0'; // æš—é»‘æ¨¡å¼ç”¨è¢å…‰ç¶ å­—
            }
            
            ctx.font = fontSize + 'px monospace';

            for(let i = 0; i < drops.length; i++) {
                // éš¨æ©Ÿé¸ä¸€å€‹å­—
                const text = alphabet.charAt(Math.floor(Math.random() * alphabet.length));
                
                // ç•«åœ¨ Canvas ä¸Š
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                // éš¨æ©Ÿé‡ç½®å›åˆ°é ‚éƒ¨ï¼Œæˆ–ç¹¼çºŒè½ä¸‹
                if(drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }

        // å•Ÿå‹• Matrix å‹•ç•«å¾ªç’°
        setInterval(drawMatrix, 30);


        /**
         * éŠæˆ²é‚è¼¯è…³æœ¬
         */
        const questions = [
            { 
                text: "å¯†ç¢¼æ˜¯å¦è¶…é 8 ç¢¼ï¼Ÿ", 
                logic: "checked",
                explanation: "é•·åº¦æ˜¯å¯†ç¢¼å¼·åº¦çš„é—œéµã€‚å»ºè­°ä½¿ç”¨è¤‡é›œåº¦é«˜ä¸”é•·åº¦è¶³å¤ çš„å¯†ç¢¼ã€‚",
                image: "password.png" 
            },
            { 
                text: "å¯†ç¢¼æ˜¯å¦åŒ…å«å€‹äººè³‡è¨Šï¼Ÿï¼ˆå¦‚ç”Ÿæ—¥ã€æ‰‹æ©Ÿã€å§“åï¼‰", 
                logic: "unchecked",
                explanation: "è‹¥é§­å®¢æˆåŠŸç›œå–ä½ çš„å€‹äººè³‡è¨Šï¼Œé‚£ä½ çš„å¯†ç¢¼è¢«ç ´è§£çš„é¢¨éšªæé«˜ã€‚é¿å…å°‡å…¬é–‹è³‡è¨Šè¨­ç‚ºå¯†ç¢¼ã€‚"
            },
            { 
                text: "ä½ æœƒé€£å…¬å…± Wifi å—ï¼Ÿï¼ˆå¦‚æ˜Ÿå·´å…‹ã€åœ–æ›¸é¤¨ï¼‰", 
                logic: "unchecked",
                explanation: "ä½ çš„ç€è¦½è³‡è¨Šã€å€‹äººè³‡è¨Šå¯èƒ½é€éå…¬å…±ç¶²è·¯è¢«æœ‰å¿ƒäººå£«åˆ©ç”¨ã€ç«Šå–ã€‚å»ºè­°ä½¿ç”¨ VPN æˆ–è‡ªå·±çš„è¡Œå‹•æ•¸æ“šã€‚"
            },
            { 
                text: "æ‰‹æ©Ÿè£¡æ˜¯å¦æœ‰ï¼šæŠ–éŸ³ã€å°ç´…æ›¸ã€ç¾åœ–ç§€ç§€ã€å¾®ä¿¡ã€å¾®åšï¼Ÿ", 
                logic: "unchecked",
                explanation: "éƒ¨åˆ†æ‡‰ç”¨ç¨‹å¼ï¼ˆç‰¹åˆ¥æ˜¯ä¾†è‡ªç‰¹å®šåœ°å€ï¼‰æœƒè¦æ±‚éå¤šæ¬Šé™ï¼Œä½ çš„è³‡æ–™å¯èƒ½æœƒè¢«ä¸æ–·å›å‚³è‡³å¢ƒå¤–ä¼ºæœå™¨ï¼Œéš±ç§é¢¨éšªæ¥µé«˜ã€‚"
            },
            { 
                text: "çœ‹åˆ°åˆ¥äººå‚³çš„é€£çµæœƒç›´æ¥é»é–‹å—ï¼Ÿ", 
                logic: "unchecked",
                explanation: "ç›´æ¥é»æ“Šé€£çµæé«˜è£ç½®ä¸­æ¯’æ©Ÿç‡ï¼Œæˆ–ç›´æ¥èª¤å…¥é‡£é­šç¶²ç«™ã€‚è«‹ç¢ºèªä¾†æºï¼Œæˆ–ä½¿ç”¨å®˜æ–¹ APP é€²å…¥ã€‚"
            },
            { 
                text: "çŸ¥é“è¨»å†Šç¶²ç«™æ™‚æœ‰åŒæ„ã€Œè’é›†è³‡æ–™ã€å—ï¼Ÿ", 
                logic: "checked",
                explanation: "ã€Œæˆ‘ä¸æ˜¯åªæœå°‹åŒ…åŒ…ï¼Œç‚ºä»€éº¼IGã€FBå°±ä¸æ–·è·³å‡ºåŒ…åŒ…å»£å‘Šï¼Ÿã€é€™äº›ç¤¾ç¾¤å¹³å°åœ¨è¨»å†Šæ™‚ï¼Œå°±æœ‰ä¸€é è©¢å•æ˜¯å¦åŒæ„è³‡æ–™è¢«å…¬å¸ä½¿ç”¨ã€‚"
            },
            { 
                text: "çŸ¥é“æä¾›çš„è³‡æ–™æœƒè¢«ç”¨ä¾†æ¨æ’­å»£å‘Šå—ï¼Ÿ", 
                logic: "checked",
                explanation: "æ˜¯ä¸æ˜¯æœ‰å‰›è¬›è¦åƒéºµï¼Œä¸‹ä¸€ç§’åˆ·æ–°è‡‰æ›¸æ™‚å°±è·³å‡ºéºµåº—å»£å‘Šï¼Ÿå€‹äººè³‡æ–™ï¼ˆå¦‚ç€è¦½ç´€éŒ„ã€æœå°‹å…§å®¹ï¼‰å¸¸è¢«ç¶²ç«™é€é Cookie èˆ‡å»£å‘Šå•†è¿½è¹¤ã€‚"
            },
            { 
                text: "çŸ¥é“å·²æä¾›çš„å€‹äººè³‡è¨Šå¯è¦æ±‚å®˜æ–¹åˆªé™¤å—ï¼Ÿ", 
                logic: "checked",
                explanation: "æ ¹æ“šã€Šå€‹äººè³‡æ–™ä¿è­·æ³•ã€‹ï¼Œæ°‘çœ¾æœ‰æ¬Šè¦æ±‚ä¼æ¥­æˆ–æ©Ÿæ§‹åˆªé™¤å·²æä¾›çš„å€‹äººè³‡æ–™ï¼ˆå¦‚çµ‚æ­¢æœå‹™æ™‚ï¼‰ï¼ŒåŒ…æ‹¬è¦æ±‚æŸ¥é–±ã€åœæ­¢è™•ç†æˆ–åˆªé™¤ã€‚"
            },
            { 
                text: "çŸ¥é“åœ¨å…¬å¸ã€å­¸æ ¡ä½¿ç”¨ç„¡ç—•è¦–çª—é‚„æ˜¯æœƒç•™ä¸‹ç´€éŒ„å—ï¼Ÿ", 
                logic: "checked",
                explanation: "ç„¡ç—•æ¨¡å¼åªæœ‰ã€Œå°è‡ªå·±ç„¡ç—•ã€ï¼Œç„¡æ³•ä¿è­·ä½ çš„ç€è¦½è¡Œç‚ºä¸è¢«ç¶²è·¯ç®¡ç†å“¡çœ‹åˆ°ã€‚å…¬å¸ç¶²è·¯è¨­å‚™é€šå¸¸å¯ä»¥è¿½è¹¤ä¸¦ä¿ç•™æ‰€æœ‰ç´€éŒ„ã€‚"
            },
            { 
                text: "ä½ æœƒå€åˆ†åŠŸèƒ½ä½¿ç”¨ä¸åŒå¸³è™Ÿå—ï¼Ÿ", 
                logic: "checked",
                explanation: "å€åˆ†å·¥ä½œèˆ‡å€‹äººå¸³è™Ÿæ˜¯é«˜è³‡å®‰æ„è­˜çš„è¡¨ç¾ï¼Œèƒ½æœ‰æ•ˆé˜²æ­¢å–®ä¸€å¸³è™Ÿæ´©æ¼å¾Œï¼Œå°è‡´å€‹äººçš„æ‰€æœ‰è¡Œè¹¤èˆ‡åå¥½è¢«ç³»çµ±å…¨é¢æŒæ¡ã€‚"
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let userResults = []; 

        // æ—¥å¤œæ¨¡å¼åˆ‡æ›
        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            const icon = document.getElementById('theme-icon');
            if (document.body.classList.contains('light-mode')) {
                icon.innerText = "â˜€ï¸";
            } else {
                icon.innerText = "ğŸŒ™";
            }
        }

        function startGame() {
            window.scrollTo(0, 0);
            document.getElementById('start-screen').classList.remove('active');
            document.getElementById('quiz-screen').classList.add('active');
            currentQuestionIndex = 0;
            score = 0;
            userResults = [];
            showQuestion();
        }

        function showQuestion() {
            const progressPercent = ((currentQuestionIndex) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progressPercent}%`;

            const currentQ = questions[currentQuestionIndex];
            document.getElementById('question-text').innerText = `${currentQuestionIndex + 1}. ${currentQ.text}`;
        }

        // è§¸ç™¼é©šåš‡æ•ˆæœ
        function triggerScare() {
            const scareEl = document.getElementById('hacker-scare');
            const flashEl = document.getElementById('red-flash');
            
            // ç§»é™¤ class ä»¥ä¾¿é‡æ–°è§¸ç™¼å‹•ç•« (å¦‚æœé€£çºŒç­”éŒ¯)
            scareEl.classList.remove('scare-active');
            flashEl.classList.remove('flash-active');
            
            // å¼·åˆ¶é‡ç¹ª (Reflow)
            void scareEl.offsetWidth;
            
            // åŠ å…¥å‹•ç•« Class
            scareEl.classList.add('scare-active');
            flashEl.classList.add('flash-active');

            // 0.5ç§’å¾Œè‡ªå‹•ç§»é™¤ï¼Œé¿å…æ“‹ä½ç•«é¢å¤ªä¹…
            setTimeout(() => {
                scareEl.classList.remove('scare-active');
                flashEl.classList.remove('flash-active');
            }, 500);
        }

        function handleAnswer(userClickedYes) {
            const currentQ = questions[currentQuestionIndex];
            let gotPoint = false;

            // è¨ˆåˆ†é‚è¼¯
            if (currentQ.logic === 'checked') {
                if (userClickedYes) gotPoint = true;
            } else if (currentQ.logic === 'unchecked') {
                if (!userClickedYes) gotPoint = true;
            }

            if (gotPoint) {
                score += 10;
            } else {
                // å¦‚æœç­”éŒ¯ (æ²’æ‹¿åˆ°åˆ†)ï¼Œè§¸ç™¼é§­å®¢é©šåš‡
                triggerScare();
            }

            userResults.push(gotPoint); 
            currentQuestionIndex++;

            // å»¶é²ä¸€é»é»è·³è½‰ï¼Œè®“åš‡äººæ•ˆæœèƒ½è¢«çœ‹åˆ°
            const delay = gotPoint ? 0 : 400;

            setTimeout(() => {
                if (currentQuestionIndex < questions.length) {
                    showQuestion();
                } else {
                    showResult();
                }
            }, delay);
        }

        function showResult() {
            document.getElementById('quiz-screen').classList.remove('active');
            document.getElementById('result-screen').classList.add('active');
            window.scrollTo(0, 0);

            const scoreEl = document.getElementById('final-score');
            let tempScore = 0;
            const interval = setInterval(() => {
                scoreEl.innerText = tempScore;
                if (tempScore >= score) {
                    clearInterval(interval);
                    analyzeResult();
                }
                tempScore++;
            }, 20);

            if (score === 0) {
                scoreEl.innerText = 0;
                analyzeResult();
            }

            renderExplanations();
        }

        function analyzeResult() {
            const titleEl = document.getElementById('result-title');
            const commentEl = document.getElementById('result-comment');
            let title = "";
            let comment = "";
            let color = "";

            if (score >= 0 && score < 30) {
                title = "è³‡å®‰è¦‹ç¿’è€…";
                comment = "ä½ çš„å¸³è™Ÿå¯èƒ½å·²ç¶“è¢«ç›œäº†ï¼è«‹ç«‹åˆ»å±•é–‹è¡Œå‹•ä¿®è£œæ¼æ´ã€‚";
                color = "var(--danger-color)"; 
            } else if (score >= 30 && score < 60) {
                title = "è³‡å®‰å…¥é–€è€…";
                comment = "ä½ çš„è³‡è¨Šå¯èƒ½å·²ç¶“è¢«è³£çµ¦å»£å‘Šå•†äº†ï¼å°å¿ƒï¼Œä½ æ­£åœ¨è£¸å¥”çš„é‚Šç·£ã€‚";
                color = "#e6e600"; 
            } else {
                title = "è³‡å®‰è³‡å„ªç”Ÿ";
                comment = "é§­å®¢çœ‹åˆ°ä½ éƒ½è¦ºå¾—é ­ç—›ï¼ä½ çš„é˜²ç¦¦å›ºè‹¥é‡‘æ¹¯ï¼Œè«‹ç¹¼çºŒä¿æŒã€‚";
                color = "var(--primary-color)"; 
            }

            titleEl.innerText = title;
            titleEl.style.color = color;
            commentEl.innerText = comment;
        }

        function renderExplanations() {
            const list = document.getElementById('explanation-list');
            list.innerHTML = ""; 

            questions.forEach((q, index) => {
                const item = document.createElement('div');
                const isCorrect = userResults[index];
                
                item.className = isCorrect ? 'exp-item' : 'exp-item wrong-item';
                
                let imgHtml = "";
                if (q.image) {
                    imgHtml = `<img src="${q.image}" alt="ç¤ºæ„åœ–" class="exp-img">`;
                }

                item.innerHTML = `
                    <span class="exp-q">
                        Q${index + 1}: ${q.text}
                        <span class="wrong-tag">âš ï¸ è³‡å®‰æ¼æ´</span>
                    </span>
                    <div class="exp-text">
                        ${q.explanation}
                        ${imgHtml}
                    </div>
                `;
                list.appendChild(item);
            });
        }
    </script>
</body>
</html>